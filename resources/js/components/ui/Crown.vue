<template>
    <div v-if="showCrown" :class="containerClass" :style="containerStyle">
        <!-- Golden Crown for 1st place -->
        <svg v-if="rank === 1" :class="crownClass" fill="currentColor" viewBox="-102.4 -102.4 1228.80 1228.80"
            class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_iconCarrier">
                <path
                    d="M978.254 300.427c0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 36.02 23.501 66.537 56 77.097-21.517 17.157-59.595 32.926-126.933 33.356-98.134 0.626-159.304-91.429-189.636-154.361 33.482-9.969 57.904-40.97 57.904-77.689 0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 36.404 23.999 67.203 57.038 77.443-31.165 62.724-93.137 154.607-188.769 154.607-73.523 0-114.78-18.623-137.64-37.145 27.448-12.988 46.441-40.925 46.441-73.307 0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 39.38 28.086 72.191 65.316 79.524-12.668 28.179-25.648 67.273-24.783 107.941l162.132 238.131c18.844 141.239 88.656 162.132 263.464 162.132 157.675 0 263.709-21.647 283.73-162.132l141.865-238.131c3.577-41.747-13.475-83.128-30.004-112.471 29.496-12.127 50.271-41.129 50.271-74.995zM491.787 178.828c0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606-22.427 0-40.606-18.179-40.606-40.606zM106.724 300.427c0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606-22.427 0-40.606-18.179-40.606-40.606zM775.59 726.022c-18.779 120.741-102.206 121.349-243.197 121.599-156.909 0.278-202.91 7.105-222.931-121.599L145.488 488.854c-1.113-56.179 19.344-97.228 19.344-97.228s21.993 57.759 154.763 57.759S532.392 295.36 532.392 295.36s98.177 154.025 212.798 154.025 154.763-57.759 154.763-57.759 19.344 40.685 19.344 96.266L775.59 726.022z m121.598-384.989c-22.427 0-40.606-18.179-40.606-40.606 0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606z"
                    fill="#FFD700"></path>
            </g>
        </svg>

        <!-- Silver Crown for 2nd place -->
        <svg v-else-if="rank === 2" :class="crownClass" fill="currentColor" viewBox="-102.4 -102.4 1228.80 1228.80"
            class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_iconCarrier">
                <path
                    d="M978.254 300.427c0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 36.02 23.501 66.537 56 77.097-21.517 17.157-59.595 32.926-126.933 33.356-98.134 0.626-159.304-91.429-189.636-154.361 33.482-9.969 57.904-40.97 57.904-77.689 0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 36.404 23.999 67.203 57.038 77.443-31.165 62.724-93.137 154.607-188.769 154.607-73.523 0-114.78-18.623-137.64-37.145 27.448-12.988 46.441-40.925 46.441-73.307 0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 39.38 28.086 72.191 65.316 79.524-12.668 28.179-25.648 67.273-24.783 107.941l162.132 238.131c18.844 141.239 88.656 162.132 263.464 162.132 157.675 0 263.709-21.647 283.73-162.132l141.865-238.131c3.577-41.747-13.475-83.128-30.004-112.471 29.496-12.127 50.271-41.129 50.271-74.995zM491.787 178.828c0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606-22.427 0-40.606-18.179-40.606-40.606zM106.724 300.427c0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606-22.427 0-40.606-18.179-40.606-40.606zM775.59 726.022c-18.779 120.741-102.206 121.349-243.197 121.599-156.909 0.278-202.91 7.105-222.931-121.599L145.488 488.854c-1.113-56.179 19.344-97.228 19.344-97.228s21.993 57.759 154.763 57.759S532.392 295.36 532.392 295.36s98.177 154.025 212.798 154.025 154.763-57.759 154.763-57.759 19.344 40.685 19.344 96.266L775.59 726.022z m121.598-384.989c-22.427 0-40.606-18.179-40.606-40.606 0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606z"
                    fill="#C0C0C0"></path>
            </g>
        </svg>

        <!-- Bronze Crown for 3rd place -->
        <svg v-else-if="rank === 3" :class="crownClass" fill="currentColor" viewBox="-102.4 -102.4 1228.80 1228.80"
            class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_iconCarrier">
                <path
                    d="M978.254 300.427c0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 36.02 23.501 66.537 56 77.097-21.517 17.157-59.595 32.926-126.933 33.356-98.134 0.626-159.304-91.429-189.636-154.361 33.482-9.969 57.904-40.97 57.904-77.689 0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 36.404 23.999 67.203 57.038 77.443-31.165 62.724-93.137 154.607-188.769 154.607-73.523 0-114.78-18.623-137.64-37.145 27.448-12.988 46.441-40.925 46.441-73.307 0-44.771-36.295-81.066-81.066-81.066s-81.066 36.295-81.066 81.066c0 39.38 28.086 72.191 65.316 79.524-12.668 28.179-25.648 67.273-24.783 107.941l162.132 238.131c18.844 141.239 88.656 162.132 263.464 162.132 157.675 0 263.709-21.647 283.73-162.132l141.865-238.131c3.577-41.747-13.475-83.128-30.004-112.471 29.496-12.127 50.271-41.129 50.271-74.995zM491.787 178.828c0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606-22.427 0-40.606-18.179-40.606-40.606zM106.724 300.427c0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606-22.427 0-40.606-18.179-40.606-40.606zM775.59 726.022c-18.779 120.741-102.206 121.349-243.197 121.599-156.909 0.278-202.91 7.105-222.931-121.599L145.488 488.854c-1.113-56.179 19.344-97.228 19.344-97.228s21.993 57.759 154.763 57.759S532.392 295.36 532.392 295.36s98.177 154.025 212.798 154.025 154.763-57.759 154.763-57.759s19.344 40.685 19.344 96.266L775.59 726.022z m121.598-384.989c-22.427 0-40.606-18.179-40.606-40.606 0-22.427 18.179-40.606 40.606-40.606 22.427 0 40.606 18.179 40.606 40.606 0 22.427-18.179 40.606-40.606 40.606z"
                    fill="#CD7F32"></path>
            </g>
        </svg>
    </div>
</template>

<script setup>
import { computed } from 'vue'

const props = defineProps({
    rank: {
        type: Number,
        required: true,
        validator: (value) => value >= 1 && value <= 5
    },
    size: {
        type: String,
        default: 'md',
        validator: (value) => ['sm', 'md', 'lg'].includes(value)
    },
    position: {
        type: String,
        default: 'top-right',
        validator: (value) => ['top-right', 'top-left', 'center', 'none'].includes(value)
    },
    rotation: {
        type: Boolean,
        default: true
    },
    translateX: {
        type: Number,
        default: 0
    },
    translateY: {
        type: Number,
        default: 0
    }
})

// Computed class for crown color based on rank
const crownClass = computed(() => {
    const baseClasses = 'drop-shadow-md'
    const sizeClasses = {
        sm: 'w-4 h-4',
        md: 'w-6 h-6',
        lg: 'w-8 h-8'
    }

    const colorClasses = {
        1: 'text-yellow-400', // Gold
        2: 'text-gray-400',   // Silver
        3: 'text-orange-600'  // Bronze
    }

    return `${baseClasses} ${sizeClasses[props.size]} ${colorClasses[props.rank]}`
})

// Computed class for container positioning
const containerClass = computed(() => {
    const baseTransforms = []

    // Add rotation if enabled
    if (props.rotation) {
        baseTransforms.push('rotate-310')
    }

    const transformClass = baseTransforms.length > 0 ? `transform ${baseTransforms.join(' ')}` : ''

    const positionClasses = {
        'top-right': 'absolute -top-2 -right-1',
        'top-left': 'absolute -top-2 -left-1',
        'center': 'absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2',
        'none': ''
    }

    return `${transformClass} ${positionClasses[props.position]}`.trim()
})

// Computed style for translation
const containerStyle = computed(() => {
    if (props.translateX !== 0 || props.translateY !== 0) {
        return {
            transform: `translate(${props.translateX}px, ${props.translateY}px) ${props.rotation ? 'rotate(12deg)' : ''}`
        }
    }
    return {}
})

// Show crown only for top 3 ranks
const showCrown = computed(() => props.rank >= 1 && props.rank <= 3)
</script>

<style scoped>
/* Additional styles if needed */
</style>
